import{c as A,n as Y,o as y,p as he,a as te,f as xe,D as se,Q as R,q as Rs,t as As,v as Es,w as Fe,u as l,x as Ts,r as d,j as s,y as Fs,z as _s,E as Ks,G as Ms,A as v,H as Hs,O as Bs,i as J,F as ze,J as Ve,L as oe,S as Pe,K as we,d as O,M as Oe,P as z,B as Qs,R as $s,U as Gs,h as Ye,V as w,W as Ce,s as zs,X as Vs,Y as U,Z as Q,_ as T,$ as We,a0 as Je,a1 as Xe,a2 as Ie,a3 as Ze,a4 as Ys,a5 as Ws,T as _e,a6 as Ke,a7 as Js,a8 as Xs,a9 as es,aa as Zs,ab as et,ac as st,ad as tt,ae as rt,af as B,ag as nt,ah as ot}from"./vendor-CAtmAK9e.js";import{f as at,a as it,p as lt,b as ct,c as h,d as dt,e as ut,g as mt,u as ht,N as ae,s as Ct,h as gt,i as xt,l as Me,j as fe,k as K,C as ft,m as ie,n as pt,o as jt,q as St,I as bt,E as It}from"./components-Nv-AO_nR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const je=A("item/load",async t=>await at(t)),le=t=>`${t.ProductType?"_":"A"}${t.ProductType==="D"?"D":"_"}${t.InactiveItem==="Y"?"Y":"_"}${t.ProductStatus?t.ProductStatus:"_"}`,Nt=({field:t,ascending:e})=>(r,n)=>{const o=e?1:-1;switch(t){case"ID":case"CustomerID":case"timestamp":case"SuggestedRetailPrice":case"itemSticker":case"bagSticker":case"caseSticker":return(r.ID-n.ID)*o;case"ProductStatus":case"InactiveItem":case"ProductType":return(le(r)===le(n)?r.ItemCode.toLowerCase()===n.ItemCode.toLowerCase()?r.ID-n.ID:0:le(r)>le(n)?1:-1)*o;default:return(r[t].toLowerCase()===n[t].toLowerCase()?r.ItemCode.toLowerCase()===n.ItemCode.toLowerCase()?r.ID-n.ID:0:r[t].toLowerCase()>n[t].toLowerCase()?1:-1)*o}},yt=t=>e=>e.ItemCode.toLowerCase().includes(t.toLowerCase())||e.ItemDescription.toLowerCase().includes(t.toLowerCase())||e.UPC.toLowerCase().includes(t.toLowerCase()),Se={ID:0,CustomerID:0,ItemCode:"",AltItemCode:"",ItemDescription:"",Color:"",SKU:"",CustomerPart:"",UPC:"",MSRP:"",SpecialInstructions:"",Notes:"",Custom1:"",Custom2:"",Custom3:"",Custom4:""},b=t=>t.customer.settings,ke=t=>t.customer.items,vt=t=>Object.keys(t.customer.items).length,Le=t=>t.customer.selectedItem,De=t=>t.customer.itemAction,H=t=>t.customer.loading,Ue=t=>t.customer.saving,Pt=t=>t.customer.loaded,ss=t=>t.customer.sort,ts=t=>t.customer.filter,rs=t=>t.customer.showInactive,wt=t=>t.customer.page,Ot=t=>t.customer.rowsPerPage,kt=t=>t.customer.customUPCAction!=="idle",Lt=Y([ke,ts,rs,ss],(t,e,r,n)=>Object.values(t).sort(Nt(n)).filter(o=>r||!(o.InactiveItem==="Y"||o.ProductType==="D")).filter(yt(e))),re=t=>t.customers.list,ge=t=>t.customers.loading,ns=t=>t.customers.loaded,Dt=t=>t.customers.sort,os=t=>t.customers.filter,Ut=t=>t.customers.rowsPerPage,qt=t=>t.customers.page,as=t=>t.customers.showInactive,qe=y("customer/item/select"),is=y("customer/item/rowsPerPage"),ls=y("customer/item/page"),cs=y("customer/item/sort"),ds=y("customer/item/filter"),us=y("customer/item/showInactive"),F=A("customer/load",async t=>await it(t),{condition(t,{getState:e}){const r=e();return!(H(r)||Ue(r))}}),X=A("customer/save",async t=>await lt({...t,Notes:t.Notes.trim(),SpecialInstructions:t.SpecialInstructions.trim()}),{condition(t,{getState:e}){const r=e();return!(H(r)||ge(r)||Ue(r))}}),$=A("customer/item/save",async t=>await ct({...t,UPC:he(t.UPC,!0)}),{condition(t,{getState:e}){const r=e();return De(r)==="idle"}}),ce=A("customer/item/generateCustomUPC",async(t,{getState:e,dispatch:r})=>{const n=e(),o=b(n),a=`Custom UPC for ${h(o)} (BarcodeAdmin)`,c=await dt(t,a);r($({...t,UPC:c?.upc??""}))},{condition(t,{getState:e}){const r=e();return!!t.ItemCode&&!!t.ID&&!!b(r)&&!kt(r)}}),Z=A("customer/item/delete",async t=>await ut(t),{condition(t,{getState:e}){const r=e();return De(r)==="idle"}}),Rt={list:{},itemCode:null,item:null,loading:!1,loaded:!1},At=te(Rt,t=>{t.addCase(qe,(e,r)=>{e.itemCode!==r.payload?.ItemCode&&(e.item=null,e.loaded=!1)}).addCase(je.pending,(e,r)=>{e.loading=!0,r.meta.arg!==e.itemCode&&(e.item=null,e.loaded=!1)}).addCase(je.fulfilled,(e,r)=>{e.loaded=!0,e.loading=!1,e.item=r.payload}).addCase(je.rejected,e=>{e.loading=!1,e.loaded=!0})}),M=A("customers/load",async()=>await mt(),{condition(t,{getState:e}){const r=e();return!ge(r)&&Object.values(re(r)).length===0?!0:!H(r)&&!ge(r)}}),ms=y("customers/sort"),hs=y("customers/filter"),Cs=y("customers/customerRowsPerPage"),gs=y("customers/setPage"),xs=y("customers/showInactive"),Et=/^local/,be="local/barcode-admin",V={customerRowsPerPage:`${be}/rowsPerPage`,itemRowsPerPage:`${be}/itemRowsPerPage`,showInactive:`${be}/showInactive`};function fs(t){return Et.test(t)?window.localStorage:window.sessionStorage}const Ne=(t,e)=>{try{if(!global.window)return;fs(t).setItem(t,JSON.stringify(e))}catch(r){console.log("setPreference()",r.message)}},ye=(t,e)=>{try{if(!global.window)return e;const r=fs(t).getItem(t);return r===null?e:JSON.parse(r)}catch(r){return console.log("getPreference()",r.message),e}},Tt={list:{},loading:!1,loaded:!1,sort:{field:"CustomerNo",ascending:!0},filter:"",showInactive:!1,rowsPerPage:ye(V.customerRowsPerPage,25),page:0},Ft=te(Tt,t=>{t.addCase(M.pending,e=>{e.loading=!0}).addCase(M.fulfilled,(e,r)=>{e.loading=!1,e.list=r.payload,e.loaded=!0}).addCase(M.rejected,e=>{e.loading=!1}).addCase(ms,(e,r)=>{r.payload!==e.sort.field?e.sort={field:r.payload,ascending:!0}:e.sort.ascending=!e.sort.ascending}).addCase(F.fulfilled,(e,r)=>{const[n]=Object.values(e.list).filter(o=>o.id===r.payload?.settings?.id);n&&delete e.list[h(n)],r.payload?.settings&&(e.list[h(r.payload.settings)]=r.payload.settings)}).addCase(X.fulfilled,(e,r)=>{const[n]=Object.values(e.list).filter(o=>o.id===r.payload?.id);n&&delete e.list[h(n)],r.payload&&(e.list[h(r.payload)]=r.payload)}).addCase(Cs,(e,r)=>{Ne(V.customerRowsPerPage,r.payload??25),e.rowsPerPage=r.payload}).addCase(gs,(e,r)=>{e.page=r.payload}).addCase(hs,(e,r)=>{e.filter=r.payload,e.page=0}).addCase(xs,(e,r)=>{e.showInactive=r.payload??!e.showInactive})}),_t={settings:null,items:{},selectedItem:null,loading:!1,saving:!1,itemAction:"idle",loaded:!1,sort:{field:"ItemCode",ascending:!0},filter:"",showInactive:ye(V.showInactive,!0),page:0,rowsPerPage:ye(V.itemRowsPerPage,25),customUPCAction:"idle"},Kt=te(_t,t=>{t.addCase(F.pending,(e,r)=>{e.loading=!0,r.meta.arg!==e.settings?.id&&(e.settings=null,e.items={},e.selectedItem=null,e.filter="",e.loaded=!1)}).addCase(F.fulfilled,(e,r)=>{if(e.loading=!1,e.loaded=!0,e.settings=r.payload?.settings??null,e.items=r.payload?.items??{},r.payload?.items){const[n]=Object.values(r.payload.items).filter(o=>o.ID===e.selectedItem?.ID);e.selectedItem=n??null}}).addCase(F.rejected,e=>{e.loading=!1}).addCase(X.pending,e=>{e.saving=!0}).addCase(X.fulfilled,(e,r)=>{e.saving=!1,e.settings=r.payload}).addCase(X.rejected,e=>{e.saving=!1}).addCase(qe,(e,r)=>{e.selectedItem=r.payload}).addCase($.pending,(e,r)=>{e.itemAction="saving",e.selectedItem=r.meta.arg}).addCase($.fulfilled,(e,r)=>{if(e.itemAction="idle",e.items=r.payload,e.selectedItem?.ID===0){const[n]=Object.values(r.payload).filter(o=>o.ItemCode===e.selectedItem?.ItemCode);e.selectedItem=n??null}else if(e.selectedItem?.ID){const[n]=Object.values(r.payload).filter(o=>o.ID===e.selectedItem?.ID);e.selectedItem=n??null}}).addCase($.rejected,e=>{e.itemAction="idle"}).addCase(Z.pending,e=>{e.itemAction="deleting"}).addCase(Z.fulfilled,(e,r)=>{e.itemAction="idle",e.selectedItem=null,e.items=r.payload}).addCase(Z.rejected,e=>{e.itemAction="idle"}).addCase(cs,(e,r)=>{e.sort=r.payload,e.page=0}).addCase(is,(e,r)=>{e.page=0,e.rowsPerPage=r.payload,Ne(V.itemRowsPerPage,r.payload)}).addCase(ls,(e,r)=>{e.page=r.payload}).addCase(ds,(e,r)=>{e.filter=r.payload,e.page=0}).addCase(us,(e,r)=>{e.showInactive=r.payload??!e.showInactive,e.page=0,Ne(V.showInactive,e.showInactive)}).addCase(ce.pending,e=>{e.customUPCAction="pending"}).addCase(ce.fulfilled,e=>{e.customUPCAction="idle"}).addCase(ce.rejected,e=>{e.customUPCAction="idle"})});async function Mt(t){try{const e=`/node-sage/api/CHI/salesorder/${encodeURIComponent(t)}`;return(await xe(e))?.result[0]??null}catch(e){return e instanceof Error?(console.debug("fetchSalesOrder()",e.message),Promise.reject(e)):(console.debug("fetchSalesOrder()",e),Promise.reject(new Error("Error in fetchSalesOrder()")))}}async function Ht({customerId:t,SalesOrderNo:e,CustomerPONo:r,lines:n,reversed:o}){try{const a="/api/operations/barcodes/customers/:customer_id/so/:SalesOrderNo.json".replace(":customer_id",encodeURIComponent(t)).replace(":SalesOrderNo",encodeURIComponent(e));return(await xe(a,{method:"POST",body:JSON.stringify({lines:n,CustomerPONo:r,reversed:o})}))?.result??0}catch(a){return a instanceof Error?(console.debug("postOrderStickers()",a.message),Promise.reject(a)):(console.debug("postOrderStickers()",a),Promise.reject(new Error("Error in postOrderStickers()")))}}async function Bt(t){try{const e=`/api/sales/orders/chums/${encodeURIComponent(t)}`;return(await xe(e,{cache:"no-cache"}))?.salesOrder??null}catch(e){return e instanceof Error?(console.debug("fetchSOSearch()",e.message),Promise.reject(e)):(console.debug("fetchSOSearch()",e),Promise.reject(new Error("Error in fetchSOSearch()")))}}const ps=(t,e)=>{if(t.ItemType!=="1")return null;const r=new se(e).div(100).add(1);return new se(t.Quantity).times(t.UnitOfMeasureConvFactor).times(r).floor().toNumber()},q=t=>(e,r)=>{const{field:n,ascending:o}=t,a=o?1:-1;switch(n){case"LineKey":case"LineSeqNo":return(e[n]>r[n]?1:-1)*a;case"ItemCode":case"BinLocation":case"UnitOfMeasure":return(e[n].toLowerCase()===r[n].toLowerCase()?e.LineSeqNo>r.LineSeqNo?1:-1:e[n].toLowerCase()>r[n].toLowerCase()?1:-1)*a;case"AltItemCode":case"ItemDescription":case"Color":case"SKU":case"CustomerPart":case"UPC":case"MSRP":case"Custom1":case"Custom2":case"Custom3":case"Custom4":return!e.item||!r.item?(e.LineSeqNo>r.LineSeqNo?1:-1)*a:(e.item[n].toLowerCase()===r.item[n].toLowerCase()?e.LineSeqNo>r.LineSeqNo?1:-1:e.item[n].toLowerCase()>r.item[n].toLowerCase()?1:-1)*a;default:return(e.LineSeqNo>r.LineSeqNo?1:-1)*a}},ve=t=>t.salesOrder.orderHeader,Qt=t=>t.salesOrder.salesOrderNo,pe=t=>t.salesOrder.shipTo,$t=t=>t.salesOrder.shipToList,Re=t=>t.salesOrder.sort,Ae=t=>t.salesOrder.detail,Gt=Y([Ae],t=>t.filter(e=>e.ItemType==="4").sort(q({field:"SequenceNo",ascending:!0}))),ne=Y([Ae,Re,pe],(t,e,r)=>t.filter(n=>!r.trim()||n.UDF_SHIP_CODE===r).filter(n=>n.ItemType!=="4").sort(q(e))),Ee=t=>t.salesOrder.loading===R.pending,zt=Y([ne,pe],(t,e)=>t.filter(r=>!e||r.UDF_SHIP_CODE===e).filter(r=>r.selected).reduce((r,n)=>(n.stickerQty??0)+r,0)),Vt=t=>t.salesOrder.qtyGenerated,js=t=>t.salesOrder.extra,Yt=Y([ne],t=>{const e=t.filter(n=>n.selected).length,r=t.filter(n=>!!n.item).length;return e===r&&r>0}),Wt=Y([ne],t=>t.filter(e=>!e.item).length);function de(t,e,r){return e.map(n=>{const{LineKey:o,LineSeqNo:a,ItemCode:c,CommentText:i,ItemType:u,BinLocation:m,UnitOfMeasure:f,UnitOfMeasureConvFactor:C,WarehouseCode:g,QuantityOrdered:P,QuantityShipped:p,UDF_SHIP_CODE:j}=n,S=new se(P).sub(p).toString(),k=t[c]?ps({ItemType:u,Quantity:S,UnitOfMeasureConvFactor:C},r):null;return{LineKey:o,LineSeqNo:a,ItemCode:c,WarehouseCode:g,CommentText:i,ItemType:u,BinLocation:m??"",UnitOfMeasure:f,UnitOfMeasureConvFactor:C,QuantityOrdered:P,QuantityShipped:p,Quantity:S,item:t[n.ItemCode],selected:!1,stickerQty:k,UDF_SHIP_CODE:j}})}const ee=A("salesOrder/load",async(t,{getState:e})=>{const r=e(),n=ke(r),o=js(r),a=await Mt(t);if(!a)return null;const{ARDivisionNo:c,CustomerNo:i,BillToName:u,SalesOrderNo:m,CustomerPONo:f,ShipExpireDate:C,OrderStatus:g,detail:P}=a,p=de(n,P,o);return{header:{SalesOrderNo:m,ARDivisionNo:c,CustomerNo:i,CustomerPONo:f,ShipExpireDate:C,OrderStatus:g,BillToName:u},detail:p}},{condition:(t,{getState:e})=>!Ee(e())}),Ss=y("salesOrder/setExtraStickers"),ue=A("salesOrder/generate",async(t,{getState:e})=>{const r=e(),n=b(r),o=ve(r),a=pe(r),c=ne(r).filter(u=>u.selected&&!!u.stickerQty&&!!u.item).filter(u=>!a||u.UDF_SHIP_CODE===a).map(u=>{const{LineKey:m,item:f,stickerQty:C}=u;return{LineKey:m,item_id:f?.ID??0,quantity:C??0}}),i={customerId:n?.id??0,SalesOrderNo:o?.SalesOrderNo??"",CustomerPONo:o?.CustomerPONo??"",lines:c,reversed:t};return await Ht(i)},{condition(t,{getState:e}){const r=e();if(!b(r))return!1;if(ve(r))return r.salesOrder.loading==="fulfilled"}}),bs=y("salesOrder/setLineQty"),Is=y("salesOrder/setShipTo"),Te=y("salesOrder/toggleLineSelected"),Ns=y("salesOrder/toggleAllSelected"),ys=y("salesOrder/setSort"),vs=y("salesOrder/dismissQtyGenerated"),Jt={field:"BinLocation",ascending:!0},Xt={extra:3,salesOrderNo:"",orderHeader:null,detail:[],loading:R.uninitialized,saving:R.uninitialized,loaded:!1,shipTo:"",qtyGenerated:null,sort:{...Jt},shipToList:[]},Zt=te(Xt,t=>{t.addCase(ee.pending,(e,r)=>{e.salesOrderNo!==r.meta.arg&&(e.orderHeader=null,e.detail=[],e.loaded=!1,e.shipTo=""),e.salesOrderNo=r.meta.arg,e.loading=R.pending,e.qtyGenerated=null}).addCase(ee.rejected,e=>{e.loading=R.rejected}).addCase(ee.fulfilled,(e,r)=>{e.salesOrderNo=r.payload?.header.SalesOrderNo??"",e.loading=R.fulfilled,e.detail=r.payload?.detail??[],e.orderHeader=r.payload?.header??null,e.qtyGenerated=null,e.shipToList=r.payload?.detail?.reduce((n,o)=>o.UDF_SHIP_CODE&&!n.includes(o.UDF_SHIP_CODE)?[...n,o.UDF_SHIP_CODE].sort():n,[])??[]}).addCase(Ss,(e,r)=>{e.extra=r.payload,e.detail=e.detail.map(n=>({...n,stickerQty:ps(n,e.extra)})).sort(q(e.sort))}).addCase(bs,(e,r)=>{e.detail=[...e.detail.filter(n=>n.LineKey!==r.payload.lineKey),...e.detail.filter(n=>n.LineKey===r.payload.lineKey).map(n=>({...n,stickerQty:r.payload.qty}))].sort(q(e.sort))}).addCase(Te,(e,r)=>{e.detail=[...e.detail.filter(n=>n.LineKey!==r.payload.lineKey),...e.detail.filter(n=>n.LineKey===r.payload.lineKey).map(n=>({...n,selected:r.payload?.forced??!n.selected}))].sort(q(e.sort))}).addCase(Ns,(e,r)=>{e.detail=[...e.detail.filter(n=>n.ItemType==="1"&&!!n.item).map(n=>({...n,selected:r.payload})),...e.detail.filter(n=>n.ItemType!=="1"||!n.item)].sort(q(e.sort))}).addCase(ys,(e,r)=>{e.sort=r.payload,e.detail=e.detail.sort(q(r.payload))}).addCase(F.fulfilled,(e,r)=>{e.detail=de(r.payload?.items||{},e.detail,e.extra).sort(q(e.sort)),e.shipTo="",e.shipToList=[]}).addCase(ue.pending,e=>{e.saving=R.pending}).addCase(ue.rejected,e=>{e.saving=R.rejected}).addCase(ue.fulfilled,(e,r)=>{e.saving=R.fulfilled,e.qtyGenerated=r.payload??null}).addCase(vs,e=>{e.saving=R.uninitialized,e.qtyGenerated=null}).addCase($.fulfilled,(e,r)=>{e.detail=de(r.payload||{},e.detail,e.extra).sort(q(e.sort))}).addCase(Z.fulfilled,(e,r)=>{e.detail=de(r.payload||{},e.detail,e.extra).sort(q(e.sort))}).addCase(Is,(e,r)=>{e.shipTo=r.payload})});async function er(){try{return(await xe("package.json"))?.version??null}catch(t){return t instanceof Error?(console.debug("fetchVersion()",t.message),Promise.reject(t)):(console.debug("fetchVersion()",t),Promise.reject(new Error("Error in fetchVersion()")))}}const sr={version:null},tr=t=>t.version.version,Ps=A("version/load",async()=>await er()),rr=te(sr,t=>{t.addCase(Ps.fulfilled,(e,r)=>{e.version=r.payload})}),nr=Rs({[Fe.reducerPath]:Fe.reducer,customer:Kt,customers:Ft,item:At,salesOrder:Zt,user:ht,version:rr}),or=As({reducer:nr}),I=()=>Es(),me=l,ar=()=>{const t=I(),{id:e}=Ts(),r=l(b);return d.useEffect(()=>{e&&e!==r?.id.toString()&&t(F(e))},[e]),s.jsxs(Fs,{variant:"tabs",className:"justify-content-center mb-3",defaultActiveKey:"home",activeKey:e,children:[s.jsx(ae,{to:"/",id:"home",children:"Customers"}),s.jsx(ae,{to:`/${r?.id??0}/settings`,id:"settings",children:r?.CustomerName??"Customer Settings"}),s.jsx(ae,{id:"orders",to:`${r?.id??0}/orders`,disabled:!r?.id,children:"Order Stickers"}),s.jsx(ae,{id:"items",to:`${r?.id??0}/items`,disabled:!r?.id,children:"Customer Items"})]})},ir=()=>{const t=I(),e=me(_s);return s.jsx("div",{children:e.map(r=>s.jsx(Ks,{context:r.context,count:r.count,variant:"warning",dismissible:!0,onClose:()=>t(Ms(r)),children:r.message},r.id))})},lr=()=>{const t=I(),e=l(Ct),r=l(gt),n=l(xt),[o,a]=d.useState(0);return d.useEffect(()=>{t(Me());const c=window.setInterval(()=>{t(Me())},1800*1e3);return a(()=>c),()=>{window.clearTimeout(o)}},[]),s.jsxs("div",{className:"mt-1",children:[!e&&!r&&s.jsx(v,{variant:"warning",children:"Login is required"}),!!n&&s.jsxs(v,{variant:"danger",children:[s.jsx("div",{children:s.jsx("strong",{children:"User Validation Error"})}),n]})]})},cr=()=>{const t=I(),e=l(tr);return d.useEffect(()=>{t(Ps())},[]),e?s.jsx(Hs,{children:s.jsxs(v,{variant:"info",className:"mt-5",children:[s.jsx("strong",{className:"me-1",children:"Version:"}),e]})}):null},dr=()=>s.jsxs("div",{children:[s.jsx(lr,{}),s.jsx(ar,{}),s.jsx(ir,{}),s.jsx(Bs,{}),s.jsx(cr,{})]}),He=({field:t,ascending:e})=>(r,n)=>{const o=e?1:-1;switch(t){case"CustomerName":return(r[t].toLowerCase()===n[t].toLowerCase()?h(r)>h(n)?1:-1:r[t].toLowerCase()>n[t].toLowerCase()?1:-1)*o;case"ARDivisionNo":case"CustomerNo":default:return(h(r)>h(n)?1:-1)*o}},ur=t=>e=>{let r;try{r=new RegExp(t,"i")}catch{}return!t||/^\d+$/.test(t)&&e.id===Number(t)||e.CustomerName.toLowerCase().includes(t.toLowerCase())||h(e).includes(t.toUpperCase())||!r||r.test(h(e))||r.test(e.CustomerName)},Be={id:0,ARDivisionNo:"",CustomerNo:"",CustomerName:"",Notes:"",SpecialInstructions:"",custom1Name:"",custom2Name:"",custom3Name:"",custom4Name:"",reqCustom1:!1,reqCustom2:!1,reqCustom3:!1,reqCustom4:!1,reqColor:!1,reqCustomerPart:!1,reqMSRP:!1,reqSKU:!1,reqUPC:!1,reqItemDescription:!1,reqAltItemNumber:!1,active:!0},mr=()=>{const t=I(),e=l(os),r=l(fe),n=l(as),o=d.useId(),a=d.useId(),c=i=>{t(xs(i.target.checked))};return s.jsxs(J,{size:"sm",children:[s.jsx(J.Text,{as:"label",htmlFor:o,"aria-label":"Filter",children:s.jsx("span",{className:"bi-funnel-fill","aria-hidden":!0})}),s.jsx(ze,{type:"search",size:"sm",value:e,onChange:i=>t(hs(i.target.value))}),r&&s.jsxs(s.Fragment,{children:[s.jsx(J.Text,{className:"input-group-text",as:"label",htmlFor:a,children:"Show Inactive"}),s.jsx(J.Checkbox,{id:a,checked:n,onChange:c})]})]})},hr=()=>{const t=Ve(),e=me(H),r=me(Ee),n=me(re),[o,a]=d.useState(""),[c,i]=d.useState(!1),u=m=>{m.preventDefault();const f=o.padStart(7,"0");a(f),i(!0),Bt(f).then(C=>{if(i(!1),!C)return;const g=n[h(C)]??n["01-MSRP"];g&&t(`/${g.id}/orders/?salesOrderNo=${C.SalesOrderNo}`)}).catch(C=>{i(!1),C instanceof Error&&console.log(C.message)})};return s.jsxs("form",{className:"input-group input-group-sm",onSubmit:u,children:[s.jsx("div",{className:"input-group-text",children:"SO#"}),s.jsx("input",{type:"search",className:"form-control form-control-sm",value:o,required:!0,maxLength:7,onChange:m=>a(m.target.value),placeholder:"Search by SO#"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-outline-primary",disabled:r||e||c,children:"Load"})]})},Cr=[{id:0,field:"CustomerNo",title:"Customer No",sortable:!0,render:t=>s.jsx(oe,{to:`/${t.id}/settings`,children:h(t)})},{id:1,field:"CustomerName",title:"Customer Name",sortable:!0,render:t=>s.jsx(oe,{to:`/${t.id}/settings`,children:t.CustomerName})},{id:3,field:"CustomerNo",title:"Orders",render:t=>s.jsx(oe,{to:`/${t.id}/orders`,children:"Orders"})},{id:4,field:"CustomerNo",title:"Items",render:t=>s.jsx(oe,{to:`/${t.id}/items`,children:"Items"})},{id:2,field:"Notes",title:"Notes/Instructions",sortable:!0,render:t=>s.jsxs("div",{className:"d-flex flex-nowrap gap-3",children:[s.jsx(K,{note:t.Notes}),s.jsx(K,{note:t.SpecialInstructions,bg:"warning"})]})}],gr=()=>{const t=I(),e=Ve(),r=l(re),n=l(ns),o=l(ge),a=l(Dt),c=l(os),i=l(qt),u=l(Ut),m=l(as),[f,C]=d.useState(Object.values(r).filter(j=>m||j.active).filter(j=>!c||j.CustomerName.includes(c)||h(j).includes(c)).sort(He(a))),[g,P]=d.useState(f.slice(i*u,i*u+u));d.useEffect(()=>{!o&&!n&&t(M())},[]),d.useEffect(()=>{const j=Object.values(r).filter(S=>m||S.active).filter(ur(c)).sort(He(a));C(j),P(j.slice(i*u,i*u+u))},[r,a,c,i,u,m]);const p=j=>{t(ms(j.field))};return s.jsxs("div",{className:"container-md",children:[s.jsxs("div",{className:"row g-3 mb-3",children:[s.jsx("div",{className:"col",children:s.jsx(mr,{})}),s.jsx("div",{className:"col-auto",children:s.jsx(Pe,{type:"button",size:"sm",spinning:o,spinnerProps:{size:"sm"},onClick:()=>t(M()),children:"Reload"})}),s.jsx("div",{className:"col-auto",children:s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>e("/0/settings"),children:"New Customer"})}),s.jsx("div",{className:"col-4",children:s.jsx(hr,{})})]}),s.jsx(we,{fields:Cr,data:g,rowClassName:j=>O({"table-warning":!j.active}),currentSort:a,keyField:"id",onChangeSort:p}),s.jsx(Oe,{size:"sm",page:i,rowsPerPage:u,count:f.length,showFirst:!0,showLast:!0,onChangePage:j=>t(gs(j)),rowsPerPageProps:{onChange:j=>t(Cs(j))}})]})},ws=()=>{const t=l(b);return!t||t.active?null:s.jsxs(v,{variant:"warning",children:[s.jsx("span",{className:"bi-toggle-off"})," This account is disabled."]})},Os=()=>{const t=I(),e=l(b);return e?s.jsx(z,{type:"button",size:"small",variant:"text",onClick:()=>t(F(e?.id)),children:"Reload Customer"}):null},G=({checked:t,onChange:e,icon:r,title:n,disabled:o})=>{const a=d.useId();return s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"checkbox",className:"btn-check",id:a,autoComplete:"off",checked:t,onChange:e,disabled:o}),s.jsx("label",{className:O("btn btn-sm",{"btn-outline-secondary":!t,"btn-secondary":t}),htmlFor:a,"aria-label":n,title:n,children:s.jsx("span",{className:O("mx-3",r)})})]})};function ks(){const t=l(H),e=l(Ue);return s.jsx(Qs,{sx:{height:10},children:s.jsx($s,{in:t||e,style:{transitionDelay:t?"800ms":"0"},unmountOnExit:!0,children:s.jsx(Gs,{variant:"indeterminate",color:e?"success":"primary"})})})}function Qe(t,e){return!!e[h(t)]&&e[h(t)].id!==t.id}const xr=()=>{const t=I(),[e,r]=d.useState({...Be}),n=l(fe),o=l(vt),[,a]=d.useState(h(e)),c=l(b),i=l(re),u=l(ns),m=l(H),[f,C]=d.useState(Qe(e,i)),g=d.useId(),P=d.useId(),p=d.useId(),j=d.useId(),S=d.useId(),k=d.useId(),W=d.useId(),N=d.useId();d.useEffect(()=>{!u&&!m&&t(M())},[]),d.useEffect(()=>{r(c??{...Be})},[c]),d.useEffect(()=>{C(Qe(e,i)),a(h(e))},[e,i]);const E=L=>qs=>{n&&r({...e,[L]:qs.target.value,changed:!0})},x=L=>()=>{n&&r({...e,[L]:!e[L],changed:!0})},_=L=>{console.debug("onSelectHandler()",L),n&&L&&h(L)!==h(e)&&r({...e,...L,changed:!0})},Us=L=>{L.preventDefault(),n&&h(e)&&t(X(e))};return s.jsxs("div",{className:"container",children:[s.jsxs("form",{onSubmit:Us,children:[!!e.CustomerNo&&s.jsxs("h2",{children:[e.CustomerName," (",h(e),")"]}),!e.CustomerNo&&s.jsx("h2",{children:"New Customer"}),s.jsxs("div",{className:"row g-3 align-items-center mt-3 mb-1",children:[s.jsx("div",{className:"col-auto",children:s.jsx(Ye,{size:"small",variant:"filled",slotProps:{htmlInput:{readOnly:!0}},label:"ID",value:e.id??"NEW"})}),s.jsx("div",{className:"col-auto",children:s.jsx(ft,{customer:e,onSelectCustomer:_,required:!0})}),s.jsx("div",{className:"col-auto",children:s.jsx(w,{type:"checkbox",label:"Active Customer",id:g,checked:e.active,onChange:x("active")})}),s.jsx("div",{className:"col-auto",children:s.jsx(z,{type:"submit",variant:"outlined",size:"small",disabled:f,children:"Save"})}),s.jsx("div",{className:"col-auto",children:s.jsx(Os,{})}),!f&&e.changed&&s.jsx("div",{className:"col",children:s.jsxs(v,{variant:"warning",children:[s.jsx("strong",{className:"me-3",children:"Changed!"}),"Don't forget to save."]})})]}),s.jsx(ks,{}),s.jsx(ws,{}),f&&s.jsxs(v,{color:"danger",children:[s.jsx("strong",{className:"me-3",children:"Heads Up!"}),i[h(e)].CustomerName," (",h(i[h(e)]),") already exists in Barcode Admin."]}),s.jsxs("div",{className:"row g-3 mt-1",children:[s.jsxs("div",{className:"col-lg-6",children:[s.jsx("label",{className:"form-label",children:s.jsxs("button",{className:"btn btn-sm btn-info",children:[s.jsx("span",{className:"bi-card-text"})," Notes"]})}),s.jsx(Ce,{minRows:2,value:e.Notes??"",readOnly:!n,className:"form-control form-control-sm",onChange:E("Notes")}),s.jsx("small",{className:"text-muted",children:"Best used for notes for maintaining this customer."})]}),s.jsxs("div",{className:"col-lg-6",children:[s.jsx("label",{className:"form-label",children:s.jsxs("button",{className:"btn btn-sm btn-warning",children:[s.jsx("span",{className:"bi-card-text"})," Special Instructions"]})}),s.jsx(Ce,{minRows:2,value:e.SpecialInstructions??"",readOnly:!n,className:"form-control form-control-sm",onChange:E("SpecialInstructions")}),s.jsx("small",{className:"text-muted",children:"Best used for instructions when printing stickers, etc."})]})]}),s.jsx("div",{className:"mt-3",children:s.jsx("h4",{children:"Customer Fields"})}),s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-lg-4",children:[s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"Item Code",checked:!0,readOnly:!0})}),s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"Alt Item No",id:P,checked:e.reqAltItemNumber,onChange:x("reqAltItemNumber"),readOnly:!n})}),s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"Description",id:p,checked:e.reqItemDescription,onChange:x("reqItemDescription"),readOnly:!n})}),s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"Color",id:j,checked:e.reqColor,onChange:x("reqColor"),readOnly:!n})}),s.jsx("div",{className:"my-1"})]}),s.jsxs("div",{className:"col-lg-4",children:[s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"SKU",id:S,checked:e.reqSKU,onChange:x("reqSKU"),readOnly:!n})}),s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"Customer Part No",id:k,checked:e.reqCustomerPart,onChange:x("reqCustomerPart"),readOnly:!n})}),s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"UPC",id:W,checked:e.reqUPC,onChange:x("reqUPC"),readOnly:!n})}),s.jsx("div",{className:"my-1",children:s.jsx(w,{type:"checkbox",label:"MSRP",id:N,checked:e.reqMSRP,onChange:x("reqMSRP"),readOnly:!n})})]}),s.jsxs("div",{className:"col-lg-4",children:[s.jsx("div",{className:"my-1",children:s.jsx(ie,{name:"Custom 1",required:e.reqCustom1,onChangeRequired:x("reqCustom1"),value:e.custom1Name,onChangeValue:E("custom1Name")})}),s.jsx("div",{className:"my-1",children:s.jsx(ie,{name:"Custom 2",required:e.reqCustom2,onChangeRequired:x("reqCustom2"),value:e.custom2Name,onChangeValue:E("custom2Name")})}),s.jsx("div",{className:"my-1",children:s.jsx(ie,{name:"Custom 3",required:e.reqCustom3,onChangeRequired:x("reqCustom3"),value:e.custom3Name,onChangeValue:E("custom3Name")})}),s.jsx("div",{className:"my-1",children:s.jsx(ie,{name:"Custom 4",required:e.reqCustom4,onChangeRequired:x("reqCustom4"),value:e.custom4Name,onChangeValue:E("custom4Name")})})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("hr",{}),s.jsx("h4",{children:"Customer Sticker Settings"}),s.jsxs("div",{children:[s.jsxs("div",{className:"btn-group btn-group-sm me-5",children:[s.jsx(G,{checked:e.itemStickerAll??!1,onChange:x("itemStickerAll"),icon:"bi-1-square",disabled:!n}),s.jsx(G,{checked:e.bagStickerAll??!1,onChange:x("bagStickerAll"),icon:"bi-bag",disabled:!n}),s.jsx(G,{checked:e.caseStickerAll??!1,onChange:x("caseStickerAll"),icon:"bi-box",disabled:!n})]}),s.jsx("small",{children:"Require stickers for all items if checked"})]})]})]}),s.jsxs("div",{children:[s.jsx("hr",{}),s.jsxs(v,{color:"info",children:[s.jsx("strong",{children:"Configured items"}),": ",o]})]})]})},fr=zs.div`
    .bca--customer-item-list {
        @media screen and (max-width: 900px) {
            tr {
                th,
                td {
                    &:nth-child(1),
                    &:nth-child(2),
                    &:nth-child(3) {
                        display: table-cell;
                    }

                    display: none;
                }
            }
        }
    }
`;function pr({children:t}){return s.jsx(fr,{children:t})}const Ls=({item:t})=>{const e=l(b),{itemSticker:r=!1,bagSticker:n=!1,caseSticker:o=!1}=t??{},{itemStickerAll:a=!1,bagStickerAll:c=!1,caseStickerAll:i=!1}=e??{};return s.jsxs("div",{children:[s.jsx("span",{className:O("me-1",{"bi-1-square":!(r||a),"text-black-50":!(r||a),"bi-1-square-fill":r||a,"text-primary":r||a})}),s.jsx("span",{className:O("me-1",{"bi-bag":!(n||c),"text-secondary":!(n||c),"bi-bag-fill":n||c,"text-primary":n||c})}),s.jsx("span",{className:O("me-1",{"bi-box":!(o||i),"text-secondary":!(o||i),"bi-box-fill":o||i,"text-primary":o||i})})]})};function jr({msrp:t,suggestedRetailPrice:e}){return!e||!Vs(t)?s.jsx(s.Fragment,{children:t}):s.jsxs("div",{className:"text-nowrap",children:[s.jsx("span",{children:t}),new se(t).lt(e)&&s.jsx("span",{className:"ms-1 bi-exclamation-triangle-fill text-danger"}),new se(t).gt(e)&&s.jsx("span",{className:"ms-1 bi-exclamation-triangle-fill text-success"})]})}const $e=t=>{const e=[];return e.push({field:"ItemCode",title:"Item",sortable:!0}),t&&(t.reqItemDescription&&e.push({field:"ItemDescription",title:"Description",sortable:!0,className:"text-wrap"}),t.reqAltItemNumber&&e.push({field:"AltItemCode",title:"Alternate Item",sortable:!0}),t.reqColor&&e.push({field:"Color",title:"Color",sortable:!0}),t.reqSKU&&e.push({field:"SKU",title:"SKU",sortable:!0}),t.reqCustomerPart&&e.push({field:"CustomerPart",title:"Customer Part",sortable:!0}),t.reqUPC&&e.push({field:"UPC",title:"UPC",sortable:!0,render:r=>he(r.UPC??"")}),t.reqMSRP&&e.push({field:"MSRP",title:"MSRP",sortable:!0,render:r=>s.jsx(jr,{msrp:r.MSRP,suggestedRetailPrice:r.SuggestedRetailPrice})}),t.reqCustom1&&e.push({field:"Custom1",title:t.custom1Name,sortable:!0}),t.reqCustom2&&e.push({field:"Custom2",title:t.custom2Name,sortable:!0}),t.reqCustom3&&e.push({field:"Custom3",title:t.custom3Name,sortable:!0}),t.reqCustom4&&e.push({field:"Custom4",title:t.custom4Name,sortable:!0}),e.push({field:"itemSticker",title:"Stickers",render:r=>s.jsx(Ls,{item:r})}),e.push({field:"ProductStatus",title:"Status",sortable:!0,render:r=>s.jsx(pt,{inactiveItem:r.InactiveItem,productType:r.ProductType,productStatus:r.ProductStatus})}),e.push({field:"SpecialInstructions",title:s.jsx("span",{className:"bi-card-text"}),render:r=>s.jsxs(s.Fragment,{children:[s.jsx(K,{note:r.SpecialInstructions,bg:"warning"}),s.jsx(K,{note:r.Notes,bg:"info"})]})})),e},Sr=()=>{const t=I(),e=l(b),r=l(Lt),n=l(Le),o=l(Pt),a=l(H),c=l(wt),i=l(Ot),[u,m]=d.useState($e(e)),[f,C]=d.useState(r.slice(c*i,c*i+i)),g=l(ss);d.useEffect(()=>{!a&&!o&&e&&t(F(e.id))},[a,o]),d.useEffect(()=>{m($e(e))},[e]),d.useEffect(()=>{const S=r.slice(c*i,c*i+i);C(S)},[c,i,r]);const P=S=>{t(cs(S))},p=S=>{t(qe(S))},j=S=>O({"text-danger":S.InactiveItem==="Y"||S.ProductType==="D","text-warning":S.InactiveItem===null});return s.jsxs(pr,{children:[s.jsx("div",{className:"table-responsive",children:s.jsx(we,{fields:u,data:f,keyField:"ID",className:"bca--customer-item-list",currentSort:g,onChangeSort:P,onSelectRow:p,rowClassName:j,selected:S=>S.ID===n?.ID})}),s.jsx(Oe,{page:c,onChangePage:S=>t(ls(S)),rowsPerPage:i,rowsPerPageProps:{onChange:S=>t(is(S))},showFirst:!0,showLast:!0,count:r.length})]})},br=({item:t})=>{const r=l(ke)[t.ItemCode];return!r||r.ID===t.ID?null:s.jsxs(v,{variant:"danger",children:["Item '",t.ItemCode,"' already exists for this customer."]})},D=({field:t,value:e,label:r,onChange:n,helpText:o,children:a,...c})=>{const i=l(b),u=l(fe),m=jt[t];return!i||!m||!i[m]?null:s.jsxs(U.Group,{as:Q,children:[s.jsx(U.Label,{column:!0,sm:4,children:r}),s.jsxs(T,{sm:8,children:[s.jsxs(J,{size:"sm",children:[s.jsx(ze,{size:"sm",value:e,onChange:n,...c,readOnly:!u}),a]}),!!o&&s.jsx("small",{className:"text-secondary",children:o})]})]})},Ir=({item:t,open:e,onConfirm:r,onCancel:n})=>{const o=l(b);return!o||!t?null:s.jsxs(We,{open:e,onClose:n,"aria-labelledby":"confirm-delete-title","aria-describedby":"confirm-delete-description",children:[s.jsxs(Je,{id:"confirm-delete-title",children:["Confirm deletion of ",t.ItemCode,"?"]}),s.jsx(Xe,{children:s.jsxs(Ie,{children:["This will remove '",t.ItemCode,"' from "," ",s.jsxs("strong",{children:[o.ARDivisionNo,"-",o.CustomerNo]})," ",o.CustomerName,"."]})}),s.jsxs(Ze,{children:[s.jsx(z,{onClick:n,children:"Cancel"}),s.jsx(z,{onClick:r,autoFocus:!0,children:"Confirm"})]})]})},Nr=({sageItem:t})=>{const e=I(),r=l(b),n=l(Le),o=l(St),a=d.useId(),[c,i]=d.useState(!1),[u,m]=d.useState("");if(d.useEffect(()=>{m(n?.ItemCode??"")},[n]),!r||!n||!o||n.InactiveItem==="Y"||n.ProductType==="D")return null;const f=()=>{i(!1),e(ce({...n,customItemCode:u}))},C=!n.ItemCode||!n.ID||!!n.UPC;return s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:O("btn btn-sm",{"btn-warning":!C,"btn-outline-warning":C}),title:"Assign new custom UPC",onClick:()=>i(!0),disabled:C,children:s.jsx("span",{className:"bi-house-gear-fill"})}),s.jsxs(We,{open:c,onClose:()=>i(!1),"aria-labelledby":a,children:[s.jsxs(Je,{id:a,children:["Confirm assign next color UPC to ",n.ItemCode,"?"]}),s.jsxs(Xe,{children:[s.jsxs(Ie,{children:["This will assign the next available color UPC to ",s.jsx("strong",{children:n.ItemCode})," for "," ","customer ",s.jsxs("strong",{children:[r.CustomerName," (",h(r),")"]}),"."]}),s.jsxs(Ie,{sx:{mt:2},children:["If you need to assign a UPC code specific to this customer, update this item code to be customer specific. For example: ",h(r),"-",n.ItemCode]}),s.jsx(Ye,{required:!0,margin:"dense",label:"Item Code",type:"text",variant:"standard",inputProps:{maxLength:45},fullWidth:!0,value:u,onChange:g=>m(g.target.value)}),!!t?.UDF_UPC_BY_COLOR&&s.jsx(Ys,{severity:"warning",children:"By Color UPC already exists, a custom item code is required."})]}),s.jsxs(Ze,{children:[s.jsx(z,{type:"button",onClick:()=>i(!1),children:"Cancel"}),s.jsx(z,{type:"button",onClick:f,disabled:!!t?.UDF_UPC_BY_COLOR&&t.ItemCode===u,children:"Confirm"})]})]})]})},yr=()=>{const t=I(),e=l(Le),r=l(b),n=l(De),o=l(fe),[a,c]=d.useState({...Se,CustomerID:r?.id}),[i,u]=d.useState(null),[m,f]=d.useState(!1),[C,g]=d.useState(!1);d.useEffect(()=>{if(e)return f(!0),c({...e});c({...Se,CustomerID:r?.id})},[e]);const P=x=>{u(x??null),x&&(console.log("selectItemHandler",x),c({...a,ItemCode:x.ItemCode,changed:a.changed||a.ItemCode!==x.ItemCode}))},p=x=>_=>{c({...a,[x]:_.target.value,changed:!0})},j=x=>_=>{c({...a,[x]:_.target.checked,changed:!0})},S=()=>f(!m),k=(x,_)=>()=>{!i||!o||c({...a,[x]:i[_],changed:!0})},W=x=>{x.preventDefault(),!(!a||!o)&&t($(a))},N=()=>{e&&(t(Z(e)),g(!1))},E=()=>{o&&(a.changed&&!window.confirm(`Are you sure you want to lose your changes to ${a.ItemCode} (id=${a.ID}?`)||(c({...Se,CustomerID:r?.id}),f(!1)))};return r?s.jsxs("div",{children:[s.jsx("h3",{children:"Item Settings"}),s.jsxs(U,{onSubmit:W,children:[s.jsxs(U.Group,{as:Q,label:"Item",children:[s.jsx(U.Label,{column:!0,sm:4,children:"Item"}),s.jsxs(T,{sm:8,children:[s.jsx(bt,{itemCode:a.ItemCode??"",onChange:p("ItemCode"),readOnly:m||!o,required:!0,onSelectItem:P,children:s.jsx("button",{type:"button",className:"btn btn-outline-secondary",disabled:!o,onClick:S,children:s.jsx("span",{className:m?"bi-lock-fill":"bi-pencil-fill"})})}),(a?.ID||i)&&s.jsx("small",{className:"text-muted",children:i?.ItemCodeDesc??"Invalid Sage Item"}),s.jsx(br,{item:a})]})]}),s.jsx(D,{field:"ItemDescription",value:a.ItemDescription,label:"Description",onChange:p("ItemDescription"),children:s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",disabled:!i||!o,onClick:k("ItemDescription","ItemCodeDesc"),children:s.jsx("span",{className:"bi-chevron-left"})})}),s.jsx(D,{field:"AltItemCode",value:a.AltItemCode,label:"Alternate Item Code",onChange:p("AltItemCode"),children:s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:i?.Category1??void 0,disabled:!i||!o,onClick:k("AltItemCode","Category1"),children:s.jsx("span",{className:"bi-chevron-left"})})}),s.jsx(D,{field:"Color",label:"Color",value:a.Color,onChange:p("Color")}),s.jsx(D,{field:"SKU",label:"SKU",value:a.SKU,onChange:p("SKU")}),s.jsx(D,{field:"CustomerPart",label:"Customer Part",value:a.CustomerPart,onChange:p("CustomerPart")}),s.jsxs(D,{field:"MSRP",label:"MSRP",value:a.MSRP,onChange:p("MSRP"),children:[!!i?.SuggestedRetailPrice&&Number(a.MSRP??0)!==Number(i?.SuggestedRetailPrice)&&s.jsxs("div",{className:"input-group-text text-danger",children:[s.jsx("span",{className:"bi-exclamation-triangle-fill me-1"}),i?.SuggestedRetailPrice]}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:Ws(i?.SuggestedRetailPrice??null).format("0.00"),disabled:!i||!o,onClick:k("MSRP","SuggestedRetailPrice"),children:s.jsx("span",{className:"bi-chevron-left"})})]}),s.jsxs(D,{field:"UPC",label:"UPC",value:a.UPC,onChange:p("UPC"),helpText:"Automatically calculates check digits for numeric codes length 11-14, 16-18",children:[s.jsx(_e,{title:he(i?.UDF_UPC??""),children:s.jsx("button",{type:"button",className:O("btn btn-sm btn-outline-secondary",{"btn-secondary":a.UPC===i?.UDF_UPC,"btn-outline-secondary":a.UPC!==i?.UDF_UPC}),disabled:!i||!o,onClick:k("UPC","UDF_UPC"),children:s.jsx("span",{className:O("bi-chevron-left",{"text-light":a.UPC===i?.UDF_UPC})})})}),s.jsx(_e,{title:he(i?.UDF_UPC_BY_COLOR??""),children:s.jsx("button",{type:"button",className:O("btn btn-sm",{"btn-info":a.UPC===i?.UDF_UPC_BY_COLOR,"btn-outline-info":a.UPC!==i?.UDF_UPC_BY_COLOR}),disabled:!i||!o,onClick:k("UPC","UDF_UPC_BY_COLOR"),children:s.jsx("span",{className:"bi-chevron-left"})})}),s.jsx(Nr,{sageItem:i})]}),s.jsxs(U.Group,{as:Q,label:"Stickers",children:[s.jsx(U.Label,{column:!0,sm:4,children:"Stickers"}),s.jsx(T,{sm:8,children:s.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":"Toggle Required Stickers",children:[s.jsx(G,{checked:a.itemSticker||r.itemStickerAll||!1,onChange:j("itemSticker"),icon:"bi-1-square",disabled:r.itemStickerAll}),s.jsx(G,{checked:a.bagSticker||r.bagStickerAll||!1,onChange:j("bagSticker"),icon:"bi-bag",disabled:r.bagStickerAll}),s.jsx(G,{checked:a.caseSticker||r.caseStickerAll||!1,onChange:j("caseSticker"),icon:"bi-box",disabled:r.caseStickerAll})]})})]}),s.jsx(D,{field:"Custom1",label:r.custom1Name,value:a.Custom1,onChange:p("Custom1")}),s.jsx(D,{field:"Custom2",label:r.custom2Name,value:a.Custom2,onChange:p("Custom2")}),s.jsx(D,{field:"Custom3",label:r.custom3Name,value:a.Custom3,onChange:p("Custom3")}),s.jsx(D,{field:"Custom4",label:r.custom4Name,value:a.Custom4,onChange:p("Custom4")}),s.jsxs(U.Group,{as:Q,className:"mb-1",children:[s.jsx(U.Label,{column:!0,sm:4,children:"Notes"}),s.jsx(T,{children:s.jsx(Ce,{minRows:2,value:a.Notes??"",readOnly:!o,className:"form-control form-control-sm",onChange:p("Notes")})})]}),s.jsxs(U.Group,{as:Q,className:"mb-1",children:[s.jsx(U.Label,{column:!0,sm:4,children:"Special Instructions"}),s.jsx(T,{children:s.jsx(Ce,{minRows:2,value:a.SpecialInstructions??"",readOnly:!o,className:"form-control form-control-sm",onChange:p("SpecialInstructions")})})]}),s.jsxs(Q,{className:"mt-3 g-3 justify-content-end",children:[s.jsxs(T,{xs:"auto",children:[s.jsx(Ke,{type:"button",variant:"outline-danger",size:"sm",onClick:()=>{g(!0)},disabled:!o||n!=="idle",children:"Delete Item"}),s.jsx(Ir,{item:e,open:C,onConfirm:N,onCancel:()=>g(!1)})]}),s.jsx(T,{xs:"auto",children:s.jsx(Ke,{type:"button",variant:"outline-secondary",size:"sm",onClick:E,disabled:!o||n!=="idle",children:"New Item"})}),s.jsx(T,{xs:"auto",children:s.jsx(Pe,{type:"submit",color:"primary",size:"sm",spinning:n==="loading"||n==="saving",disabled:!o||!a.ItemCode||n!=="idle",children:"Save Item"})})]})]}),a.changed&&s.jsxs(v,{variant:"warning",children:[s.jsx("span",{className:"bi-exclamation-triangle-fill me-1"}),"Don't forget to save!"]})]}):s.jsx("h3",{children:"Select A Customer"})},vr=()=>{const t=I(),e=l(ts),r=n=>{t(ds(n.target.value))};return s.jsxs("div",{className:"input-group input-group-sm",children:[s.jsx("div",{className:"input-group-text",children:"Filter Item"}),s.jsx("input",{type:"search",className:"form-control form-control-sm",onChange:r,value:e})]})},Pr=()=>{const t=I(),e=l(rs),r=d.useId();return s.jsx(w,{type:"checkbox",label:"Show Inactive",checked:e,id:r,onChange:n=>t(us(n.target.checked))})},wr=()=>{const t=l(b);return t?s.jsxs("h2",{children:[t.CustomerName," (",h(t),")"]}):s.jsx("h2",{children:"Select a customer"})},Or=()=>{const t=l(b);return!t||!t.Notes?null:s.jsxs(v,{variant:"info",children:[s.jsxs("strong",{children:[s.jsx("span",{className:"bi-card-checklist me-1"}),"Customer Notes"]}),s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:t.Notes})]})},kr=()=>{const t=l(b);return!t||!t.SpecialInstructions?null:s.jsxs(v,{variant:"warning",children:[s.jsxs("strong",{children:[s.jsx("span",{className:"bi-info-circle me-1"}),"Special Instructions"]}),s.jsx("div",{style:{whiteSpace:"pre-wrap"},className:"mt-1",children:t.SpecialInstructions})]})},Ds=()=>{const t=l(b);return t?s.jsxs(s.Fragment,{children:[s.jsx(wr,{}),s.jsx(ws,{}),s.jsxs("div",{className:"row g-3",children:[!!t?.Notes&&s.jsx("div",{className:"col",children:s.jsx(Or,{})}),!!t?.SpecialInstructions&&s.jsx("div",{className:"col",children:s.jsx(kr,{})})]})]}):null},Lr=()=>{const t=l(b);return s.jsxs("div",{children:[s.jsx(Ds,{}),s.jsxs("div",{className:"row g-3 mt-1",children:[s.jsx("div",{className:"col-auto",children:s.jsx(vr,{})}),s.jsx("div",{className:"col-auto",children:s.jsx(Pr,{})}),s.jsx("div",{className:"col-auto",children:s.jsx(Os,{})})]}),s.jsx(ks,{}),t?.active&&s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-6 col-md-7 col-lg-8 col-xl-9",children:s.jsx(Sr,{})}),s.jsx("div",{className:"col-6 col-md-5 col-lg-4 col-xl-3",children:s.jsx(yr,{})})]})]})},Dr=()=>{const t=I(),e=l(Vt);return e===null?s.jsxs("div",{children:[s.jsxs("strong",{children:[s.jsx("span",{className:"bi-info-circle me-1"}),"Note: "]}),"Generating stickers will clear all existing stickers for this order."]}):s.jsxs(v,{variant:e===0?"danger":"success",dismissible:!0,onClose:()=>t(vs()),children:[s.jsx("strong",{children:"Qty Generated"}),": ",e]})},Ur=()=>{const t=I(),[e,r]=Js(),n=l(Qt),o=l(Ee),a=l(js),c=l(Re),i=l(zt),[u,m]=d.useState(n),[f,C]=d.useState(!1),g=l(pe),P=l($t),p=d.useId(),j=d.useId();d.useEffect(()=>{const N=e.get("salesOrderNo");N&&N!==n&&t(ee(N.padStart(7,"0")))},[]),d.useEffect(()=>{m(n),r({salesOrderNo:n})},[n]);const S=N=>{t(Is(N.target.value))},k=N=>{N.preventDefault(),t(ee(u.trim().padStart(7,"0")))},W=()=>{t(ue(f))};return s.jsxs("div",{className:"row g-3 align-items-baseline mt-3",children:[s.jsx("div",{className:"col-auto",children:s.jsx("form",{onSubmit:k,children:s.jsxs("div",{className:"input-group input-group-sm",children:[s.jsx("div",{className:"input-group-text",children:"SO#"}),s.jsx("input",{type:"search",value:u,className:"form-control",maxLength:7,minLength:6,onChange:N=>m(N.target.value)}),s.jsx(Pe,{type:"submit",variant:"primary",spinning:o,size:"sm",children:"Load"})]})})}),s.jsx("div",{className:"col-auto",children:s.jsxs("div",{className:"input-group input-group-sm",children:[s.jsx("div",{className:"input-group-text",children:"Extra"}),s.jsx("input",{type:"number",value:a,className:"form-control",min:0,max:100,onChange:N=>t(Ss(N.target.valueAsNumber))}),s.jsx("div",{className:"input-group-text",children:"%"})]})}),s.jsx("div",{className:"col-auto",children:s.jsxs("div",{className:"input-group input-group-sm",children:[s.jsx("div",{className:"input-group-text",children:"Store"}),s.jsx("input",{type:"search",className:"form-control form-control-sm",value:g,onChange:S,list:p}),s.jsxs("datalist",{id:p,children:[P.map(N=>s.jsx("option",{children:N},N)),"'"]})]})}),s.jsxs("div",{className:"col-auto",children:["Sort: ",s.jsx("strong",{children:c.field})]}),s.jsx("div",{className:"col-auto",children:s.jsx(w,{type:"checkbox",label:"Print Reversed",id:j,checked:f,onChange:N=>C(N.target.checked)})}),s.jsx("div",{className:"col-auto",children:s.jsxs("button",{type:"button",className:"btn btn-sm btn-success",disabled:i===0,onClick:W,children:["Generate Stickers (",i,")"]})}),s.jsx("div",{className:"col",children:s.jsx(Dr,{})})]})},qr=({lineKey:t,stickerQty:e,disabled:r})=>{const n=I(),o=a=>{r||n(bs({lineKey:t,qty:a.target.valueAsNumber}))};return s.jsx("input",{type:"number",value:e??"",onChange:o,min:0,disabled:r,readOnly:r,style:{maxWidth:"6rem"},className:"form-control form-control-sm text-end"})},Rr=({lineKey:t})=>{const e=I(),r=l(Ae),n=d.useId(),[o]=r.filter(c=>c.ItemType==="1"&&c.LineKey===t),a=c=>e(Te({lineKey:t,forced:c.target.checked}));return s.jsx(w,{type:"checkbox",id:n,"aria-lable":"Row Selected",checked:o?.selected,onChange:a,disabled:!o||!o.item})},Ar=()=>{const t=I(),e=l(Yt),r=d.useId(),n=o=>{t(Ns(o.target.checked))};return s.jsx(w,{type:"checkbox","aria-label":"Sticker Selected",id:r,checked:e,onChange:n})},Er=()=>{const t=l(Gt);return t.length?s.jsxs(v,{variant:"info",children:[s.jsxs("div",{children:[s.jsx("span",{className:"bi-journal-check me-3"}),s.jsx("strong",{children:"S/O Comments"})]}),t.map(e=>s.jsxs("div",{children:[s.jsx("span",{className:"bi-info-circle-fill me-1"}),e.CommentText]},e.LineKey))]}):null},Tr=({lineKey:t,itemCode:e,commentText:r,notes:n,specialInstructions:o})=>{const a=I(),c=()=>{a(Te({lineKey:t}))};return s.jsxs("div",{className:"d-flex justify-content-start",children:[s.jsx("div",{className:"me-3",onClick:c,children:e}),!!r&&s.jsx(K,{note:r}),!!n&&s.jsx(K,{note:n}),!!o&&s.jsx(K,{note:o,bg:"warning"})]})},Fr=()=>{const t=l(Wt);return t?s.jsxs(v,{variant:"warning",children:[s.jsx("span",{className:"bi-exclamation-triangle-fill me-1"}),"Missing data for ",s.jsx("strong",{children:t})," item",t===1?"":"s","."]}):null},_r=()=>{const t=l(ve),e=l(b),r=l(re);if(!t||!e||h(t)===h(e))return null;const n=h(t);return s.jsx(v,{variant:"warning",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-auto bi-shop me-3"}),s.jsx("div",{className:"col-auto",children:s.jsxs("strong",{className:"me-3",children:[n," -- ",t.BillToName]})}),!!r[n]&&!!r[n].SpecialInstructions&&s.jsx("div",{className:"col",children:r[n].SpecialInstructions})]})})},Ge=t=>{const e=[{field:"LineKey",title:s.jsx(Ar,{}),sortable:!1,render:r=>s.jsx(Rr,{lineKey:r.LineKey})},{field:"SequenceNo",title:"Line",sortable:!0,render:r=>r.LineKey},{field:"ItemCode",title:"Item",sortable:!0,render:r=>s.jsx(Tr,{lineKey:r.LineKey,itemCode:r.ItemCode,commentText:r.CommentText,notes:r.item?.Notes,specialInstructions:r.item?.SpecialInstructions})},{field:"WarehouseCode",title:"Whse",sortable:!0},{field:"BinLocation",title:"Bin",sortable:!0},{field:"Quantity",title:"Quantity",sortable:!0,className:"text-end"},{field:"UnitOfMeasure",title:"U/M",className:"text-end"},{field:"stickerQty",title:"Sticker Qty",sortable:!0,render:r=>s.jsx(qr,{lineKey:r.LineKey,stickerQty:r.stickerQty,disabled:!r.item||r.ItemType!=="1"})},{field:"itemSticker",title:"Stickers",render:r=>s.jsx(Ls,{item:r.item})}];return t&&(t.reqItemDescription&&e.push({field:"ItemDescription",title:"Description",sortable:!0,render:r=>r.item?.ItemDescription??null}),t.reqAltItemNumber&&e.push({field:"AltItemCode",title:"Alternate Item",sortable:!0,render:r=>r.item?.AltItemCode??null}),t.reqColor&&e.push({field:"Color",title:"Color",sortable:!0,render:r=>r.item?.Color??null}),t.reqSKU&&e.push({field:"SKU",title:"SKU",sortable:!0,render:r=>r.item?.SKU??null}),t.reqCustomerPart&&e.push({field:"CustomerPart",title:"Customer Part",sortable:!0,render:r=>r.item?.CustomerPart??null}),t.reqUPC&&e.push({field:"UPC",title:"UPC",sortable:!0,render:r=>r.item?.UPC??null}),t.reqMSRP&&e.push({field:"MSRP",title:"MSRP",sortable:!0,render:r=>r.item?.MSRP??null}),t.reqCustom1&&e.push({field:"Custom1",title:t.custom1Name,sortable:!0,render:r=>r.item?.Custom1??null}),t.reqCustom2&&e.push({field:"Custom2",title:t.custom2Name,sortable:!0,render:r=>r.item?.Custom2??null}),t.reqCustom3&&e.push({field:"Custom3",title:t.custom3Name,sortable:!0,render:r=>r.item?.Custom3??null}),t.reqCustom4&&e.push({field:"Custom4",title:t.custom4Name,sortable:!0,render:r=>r.item?.Custom4??null})),e},Kr=()=>{const t=I(),e=l(b),r=l(Re),n=l(ne),[o,a]=d.useState(0),[c,i]=d.useState(25),[u,m]=d.useState(Ge(e));d.useEffect(()=>{m(Ge(e))},[e]),d.useEffect(()=>{a(0)},[r]);const f=g=>a(g),C=g=>{a(0),i(g)};return s.jsxs("div",{children:[s.jsx(Fr,{}),s.jsx(Er,{}),s.jsx(_r,{}),s.jsx(Oe,{page:o,onChangePage:f,rowsPerPage:c,rowsPerPageProps:{onChange:C},count:n.length}),s.jsx(we,{fields:u,data:n.slice(o*c,o*c+c),className:"table-hover",rowClassName:g=>O({"text-danger":!g.item,"table-warning":!g.selected}),currentSort:r,keyField:"LineKey",onChangeSort:g=>t(ys(g))})]})},Mr=()=>{const t=l(b);return s.jsxs("div",{children:[s.jsx(Ds,{}),t?.active&&s.jsxs("div",{children:[s.jsx(Ur,{}),s.jsx(Kr,{})]})]})},Hr=()=>{const t=I(),e=Xs("(prefers-color-scheme: dark)");d.useEffect(()=>{t(M())},[]);const r=es.useMemo(()=>Zs({palette:{mode:e?"dark":"light"}}),[e]);return s.jsx(It,{children:s.jsxs(et,{theme:r,children:[s.jsx(st,{}),s.jsx(tt,{children:s.jsx(rt,{children:s.jsxs(B,{path:"/",element:s.jsx(dr,{}),children:[s.jsx(B,{index:!0,element:s.jsx(gr,{})}),s.jsx(B,{path:"/:id/orders",element:s.jsx(Mr,{})}),s.jsx(B,{path:"/:id/settings",element:s.jsx(xr,{})}),s.jsx(B,{path:"/:id/items",element:s.jsx(Lr,{})}),s.jsx(B,{path:"*",element:s.jsx("h2",{children:"Not Found"})})]})})})]})})};window.localStorage.setItem("debug","*");const Br=document.getElementById("app"),Qr=nt.createRoot(Br);Qr.render(s.jsx(es.StrictMode,{children:s.jsx(ot,{store:or,children:s.jsx(Hr,{})})}));
//# sourceMappingURL=index-YyAv0pfv.js.map
